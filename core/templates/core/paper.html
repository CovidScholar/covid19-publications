{% extends "core/base.html" %}
{% load static %}
{% block content %}
    <div class="gradient-header">
        <div class="container mt-4">
            <div class="row">
                <div class="col-md-2">
                    {% if paper.preview_image %}
                        <img src="{{ paper.preview_image.url }}" style="max-height: 200px"
                             class="img-fluid mx-auto d-block">
                    {% else %}
                        <img src="{% static "core/img/paper-not-found.png" %}" style="max-height: 150px"
                             class="img-fluid mx-auto d-block">
                    {% endif %}
                </div>
                <div class="col-md-8">
                    <h3 class="text-white">{{ paper.title }}</h3>
                    <h6 class=" text-white" style="font-size: 0.9em">
                        <i class="fas fa-layer-group"></i> {{ paper.category.name }}&nbsp;&nbsp;&middot;&nbsp;&nbsp;
                        {% for author in paper.authors.all|slice:":5" %}
                            {% if not forloop.first %}&nbsp;{% endif %}
                            <span class="{% if author.citation_count %}need-tooltip{% endif %} text-nowrap text-white"
                                  data-toggle="tooltip"
                                  data-placement="top"
                                  title="Citations: {{ author.citation_count }}">
                                <i class="fas fa-user"></i> {{ author.first_name }} {{ author.last_name }}
                        </span>
                        {% endfor %}
                    </h6>
                    <div class="mt-3">
                        <a href="{{ paper.pdf_url }}">
                            <button class="btn btn-dark"><i class="fa fa-file"></i> PDF</button>
                        </a>
                        <a href="{{ paper.url }}">
                            <button class="btn btn-info ml-3"><i
                                    class="fa fa-external-link-alt"></i>
                                {{ paper.host.name }}
                            </button>
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="container">
        <div class="row">
            <div class="col-md-12">
                <div class="card mt-4">
                    <div class="card-body">
                        <h4 class="card-title text-muted mb-2">
                            Abstract
                        </h4>
                        <p class="card-text mb-2" style="font-size: 15px">
                            {{ paper.abstract }}
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div id="paper-container" class="container mt-4">
        <div class="col-lg-6 col-md-6 col-sm-12 col-12 mt-5" style="margin-bottom: -20px">
            <h3 class="text-muted text-center d-md-none d-sm-block d-block mb-2">Similar Paper</h3>
            <h3 class="text-muted d-md-inline-block">Similar Paper</h3>
        </div>
        {% for current_paper in similar_papers %}
            <div class="my-5">
                {% include 'core/partials/_paper_card.html' with html=True paper=current_paper score=current_paper.search_score show_score=True %}
            </div>
        {% empty %}
            <div class="my-5 text-center font-weight-bold">No similar papers found</div>
        {% endfor %}
    </div>

{% endblock %}

{% block script %}
{% endblock %}

{% block css %}
{% endblock %}